---
export const prerender = true;

import UpdateMarket from "../../../components/admin/markets/forms/UpdateMarket.astro";
import AdminLayout from "../../../layouts/AdminLayout.astro";

import { getMarkets, getMarketById } from "../../../lib/data/markets";

export async function getStaticPaths() {
  const markets = await getMarkets();

  if (!markets) return [];

  return markets.map((market) => ({ params: { marketId: market.id } }));
}

const { marketId } = Astro.params;

const market = await getMarketById(marketId);

if (!market) return;
---

<AdminLayout>
  <main class="update_market">
    <section>
      <UpdateMarket server:defer market={market} />
    </section>
  </main>
</AdminLayout>

<style>
  .update_market {
    padding: 2rem;
  }
</style>
