---
import { Icon } from "astro-icon/components";

interface Props {
  productId: string;
}

const { productId } = Astro.props;
---

<form id="add_product__tocart">
  <input type="text" name="productId" value={productId} hidden />
  <button class:list={["add_product", "primary_button", "centered_button"]}>
    <Icon name="mdi:cart" size={20} />
    <span>AÃ±adir</span>
  </button>
</form>

<style>
  .add_product {
    padding: 0.5rem;

    gap: 0.5rem;

    font-size: large;

    cursor: pointer;
  }
</style>

<script>
  import { actions } from "astro:actions";

  const form = document.getElementById(
    "add_product__tocart"
  ) as HTMLFormElement;

  form?.addEventListener("submit", async (event) => {
    event.preventDefault();
    const formData = new FormData(form);
    const { error } = await actions.cart.addProductToCart(formData);
  });
</script>
